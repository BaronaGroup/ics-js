"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function NoEventsError(t){this.name="NoEventsError",this.message=t||"No events added."}function InvalidEventError(t){this.name="InvalidEventError",this.message=t||"Event is not configured correctly."}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();NoEventsError.prototype=Object.create(Error.prototype),NoEventsError.prototype.constructor=NoEventsError,InvalidEventError.prototype=Object.create(Error.prototype),InvalidEventError.prototype.constructor=InvalidEventError;var ICS=function(){function t(){_classCallCheck(this,t),this.events=[]}return _createClass(t,null,[{key:"MIME_TYPE",value:"text/calendar",enumerable:!0},{key:"SEPARATOR",value:"\n",enumerable:!0}]),_createClass(t,[{key:"addEvent",value:function(t){if(!(t instanceof ICSEvent))throw new TypeError("Argument `event` must be an instance of ICSEvent.");if(!t.isValid())throw new InvalidEventError;this._events.push(t)}},{key:"toString",value:function(){if(this.events.length<1)throw new NoEventsError;var e=this.events.map(function(t){return t.toString()});return["BEGIN:VCALENDAR","VERSION:2.0",e.join(t.SEPARATOR),"END:VCALENDAR"].join(t.SEPARATOR)}},{key:"toBlob",value:function(){return new Blob([this.toString()],{type:t.MIME_TYPE})}},{key:"toBase64",value:function(t){var e=new window.FileReader;e.readAsDataURL(this.toBlob()),e.onloadend=function(){return t(e.result)}}}]),t}(),ICSEvent=function(){function t(){_classCallCheck(this,t),this.subject=null,this.start=null,this.end=null,this.description=null,this.location=null}return _createClass(t,[{key:"isValid",value:function(){return void 0==this.subject||void 0==this.start||void 0==this.end?!1:void 0}},{key:"toString",value:function(){if(!this.isValid())throw new InvalidEventError;var e=[];return void 0!=this.description&&e.push("DESCRIPTION:"+this.description),void 0!=this.location&&e.push("LOCATION:"+this.location),["BEGIN:VEVENT","CLASS:PUBLIC","DTSTART;VALUE=DATE:"+t.dateToICSFormat(this.start),"DTEND;VALUE=DATE:"+t.dateToICSFormat(this.end),"SUMMARY;LANGUAGE=en-us:"+this.subject,e.join(ICS.SEPARATOR),"TRANSP:TRANSPARENT","END:VEVENT"].join(ICS.SEPARATOR)}}],[{key:"dateToICSFormat",value:function(t){if(!(t instanceof Date))throw new TypeError("Argument `date` must be an instance of Date.");var e=("0000"+t.getFullYear().toString()).slice(-4),n=("00"+(t.getMonth()+1).toString()).slice(-2),r=("00"+t.getDate().toString()).slice(-2),o=("00"+t.getHours().toString()).slice(-2),i=("00"+t.getMinutes().toString()).slice(-2),s=("00"+t.getMinutes().toString()).slice(-2),a="T"+o+i+s;return e+n+r+a}}]),t}();